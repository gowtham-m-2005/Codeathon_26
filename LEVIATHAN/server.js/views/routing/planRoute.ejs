<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plan Route</title>
    <style>
        :root{--bg:#071229;--card:#0b1622;--muted:#9aa4b2;--accent:#06b6d4}
        html,body{height:100%;}
        body{font-family:Inter,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,#041021 0%,#071229 100%); color:#e6eef6; margin:0; padding:20px}
        .container{max-width:680px;margin:0 auto}
        h1{margin:0 0 8px 0}
        .subtitle{color:var(--muted); margin-bottom:20px}
        .card{background:var(--card); padding:20px; border-radius:10px; box-shadow:0 8px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03)}
        .info-box{background:rgba(6,182,212,0.1); padding:12px; border-radius:8px; margin-bottom:16px; border-left:3px solid var(--accent)}
        .info-box p{margin:6px 0; font-size:14px}
        .form-group{margin-bottom:16px}
        label{display:block; margin-bottom:6px; font-size:13px; color:var(--muted); font-weight:600}
        select, input{width:100%; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:rgba(255,255,255,0.02); color:inherit; font-size:14px}
        .radio-group{display:flex; gap:12px; margin-top:8px}
        .radio-item{flex:1; padding:12px; border-radius:8px; border:2px solid rgba(255,255,255,0.06); cursor:pointer; text-align:center; transition:all 0.2s}
        .radio-item:hover{border-color:var(--accent)}
        .radio-item input[type=radio]{margin-right:6px}
        .radio-item.selected{border-color:var(--accent); background:rgba(6,182,212,0.08)}
        .btn{display:inline-block; padding:10px 16px; background:linear-gradient(90deg,var(--accent),#7c3aed); color:#042027; border-radius:8px; text-decoration:none; font-weight:700; border:none; cursor:pointer; font-size:14px; width:100%}
        .btn:disabled{opacity:0.5; cursor:not-allowed}
        .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,0.08); color:var(--muted)}
        .actions{display:flex; gap:8px; margin-top:16px}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
</head>
<body>
    <%- include('../partials/navbar') %>

    <div class="container">
        <h1>Plan New Route</h1>
        <p class="subtitle">Create an optimized route using routing algorithms</p>

        <div class="card">
            <div class="info-box">
                <p><strong>Container:</strong> <%= container.container_code %></p>
                <p><strong>Available Sections:</strong> <%= container.available_sections || 0 %></p>
                <p><strong>Available Packages:</strong> <%= availablePackages || 0 %></p>
            </div>

            <form method="POST" action="/container/<%= container.container_id %>/create-route">
                <div class="form-group">
                    <label>Select Routing Algorithm</label>
                    <div class="radio-group">
                        <label class="radio-item" id="radio-astar">
                            <input type="radio" name="algorithm" value="A_STAR" checked>
                            <div><strong>A* Algorithm</strong></div>
                            <div style="font-size:11px; color:var(--muted); margin-top:4px">Faster with heuristic</div>
                        </label>
                        <label class="radio-item" id="radio-dijkstra">
                            <input type="radio" name="algorithm" value="DIJKSTRA">
                            <div><strong>Dijkstra</strong></div>
                            <div style="font-size:11px; color:var(--muted); margin-top:4px">Guaranteed shortest</div>
                        </label>
                    </div>
                </div>

                <div class="actions">
                    <button type="submit" class="btn" style="flex:1">Create Route</button>
                    <a href="/container/<%= container.container_id %>/routing" class="btn ghost" style="flex:0.3; text-align:center">Cancel</a>
                </div>
            </form>
        </div>
    </div>

    <%- include('../partials/footer') %>

    <script>
        gsap.from('.card', {autoAlpha:0, y:16, duration:0.6, ease:'power3.out'});

        const radioItems = document.querySelectorAll('.radio-item');
        const radios = document.querySelectorAll('input[type=radio]');

        radioItems.forEach((item, i) => {
            item.addEventListener('click', () => {
                radioItems.forEach(r => r.classList.remove('selected'));
                item.classList.add('selected');
                radios[i].checked = true;
            });
        });

        // Set initial selected
        document.getElementById('radio-astar').classList.add('selected');
    </script>
</body>
</html>
